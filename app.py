import numpy as np
import pandas as pd
from flask import Flask, request, jsonify, render_template
import pickle
from sklearn.preprocessing import LabelEncoder,StandardScaler

ssc=StandardScaler()
enc=LabelEncoder()
# Create flask app
flask_app = Flask(__name__)
model = pickle.load(open("model.pkl", "rb"))
df=pd.read_csv("ids")
print(df)

@flask_app.route("/")
def Home():
    return render_template("index.html")

@flask_app.route("/predict", methods = ["POST"])
def predict():
    features = [[x for x in request.form.values()]]
    # features = enc.fit_transform(features)
    # features = ssc.fit_transform([features])

    # features = float(features)
    features = np.array(features)
    # features = features.reshape(-1, 1)
    prediction = model.predict(features)
    prediction = round(prediction[0])
    if prediction==0:
        global output
        output="Benign"
    elif prediction==1:
        output="Malicious"




    return render_template("index.html", prediction_text = "THE MALWARE PREDICTION IS {}".format(output))


if __name__ == "__main__":
    flask_app.run(debug=True)